angular.module("templates/kiosk-nav.html",[]).run(["$templateCache",function(a){a.put("templates/kiosk-nav.html",'<nav>\n	<ul>\n		<li ng-repeat="topic in topics">\n			<a href="{{topic.url}}">{{topic.title}}</a>\n		</li>\n	</ul>\n</nav>')}]),angular.module("templates/kiosk.html",[]).run(["$templateCache",function(a){a.put("templates/kiosk.html",'<div>\n        <div ng-bind-html="currentSlide.content"></div>\n	<div ng-transclude></div>\n</div>\n')}]),angular.module("ng-kiosk",["ngSanitize","ng-kiosk.mapping","templates/kiosk.html","templates/kiosk-nav.html"]).directive("kiosk",[function(){return{restrict:"E",controller:"KioskController",templateUrl:"templates/kiosk.html",replace:!0,transclude:!0,scope:{src:"@"},link:function(a,b){a.$watch("state",function(a,c){b.addClass(a),b.removeClass(c)})}}}]).controller("KioskController",["$scope","$http","map","$q",function(a,b,c,d){if(!a.src)throw new Error("kiosk src attribute not set");var e=d.defer();b.get(a.src).then(function(c){return a.setKiosk(c.data),b.get(a.kiosk._links.topic.href)}).then(function(c){return a.setTopics(c.data),b.get(a._topics._embedded.topic[0]._links.slide.href)}).then(function(b){a.setSlides(b.data),a.setState("is-ready")}).catch(function(){a.setState("is-error")}),a.setKiosk=function(b){a.kiosk=b},a.setTopics=function(b){a._topics=b,a.topics=c.topics(b),e.resolve(a.topics)},a.setSlides=function(b){a._slides=b,a.slides=c.slides(b),a.currentSlide=a.slides[0]},a.setState=function(b){a.state=b,a.$broadcast("kiosk:"+b),a.$emit("kiosk:"+b)},this.getTopics=function(){return e.promise},a.setState("is-initializing")}]).directive("kioskNav",function(){return{require:"^kiosk",restrict:"E",replace:!0,templateUrl:"templates/kiosk-nav.html",link:function(a,b,c,d){d.getTopics().then(function(b){a.topics=b})}}}),angular.module("ng-kiosk.mapping",[]).factory("map",function(){return{topics:function(a){return a._embedded.topic.map(function(a){return{title:a.title,url:a._links.self.href}})},slides:function(a){return a._embedded.slide.map(function(a){return{content:a.content}})}}});