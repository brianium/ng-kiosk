"use strict";angular.module("ng-kiosk",["ng-kiosk.services"]).directive("kiosk",["$http","State",function(a,b){return{restrict:"E",controller:"KioskController",template:'<div class="is-initializing"><div ng-transclude></div></div>',replace:!0,transclude:!0,link:function(a,c,d,e){var f=new b(c,a);return d.src?void e.getRoot(d.src,f).then(e.setTopics):void c.html("<p><strong>ng-kiosk:src attribute not set</strong></p>")}}}]).controller("KioskController",["$scope","$http",function(a,b){this.getRoot=function(a,c){return this.dataUrl=a,this.state=c,b.get(a).then(angular.bind(this,this.setData)).then(this.getTopics).catch(angular.bind(this,c.set,"is-error"))},this.setData=function(b){return a.data=b.data,this.state.set("is-ready"),b.data},this.getTopics=function(a){var c=a._links.topic;return b.get(c.href).then(function(a){var b=a.data._embedded.topic;return b.map(function(a){return{title:a.title,href:a._links.self.href}})})},this.setTopics=function(b){a.topics=b}}]).directive("kioskNav",function(){return{require:"^kiosk",restrict:"E",replace:!0,template:'<nav><ul><li ng-repeat="topic in topics"><a href="{{topic.href}}">{{topic.title}}</a></li></ul></nav>'}}),angular.module("ng-kiosk.services",[]),angular.module("ng-kiosk.services").factory("State",function(){var a=["is-initializing","is-ready","is-error"];return function(b,c){this.set=function(d){angular.forEach(a,b.removeClass,b),b.addClass(d),c.$broadcast("kiosk:"+d),c.$emit("kiosk:"+d)}}});