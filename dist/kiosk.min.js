angular.module("templates/kiosk-nav.html",[]).run(["$templateCache",function(a){a.put("templates/kiosk-nav.html",'<nav>\n	<ul>\n		<li ng-repeat="topic in kiosk.topics">\n			<a href="{{topic.url}}">{{topic.title}}</a>\n		</li>\n	</ul>\n</nav>\n')}]),angular.module("templates/kiosk.html",[]).run(["$templateCache",function(a){a.put("templates/kiosk.html",'<div class="kiosk" ng-class="state">\n    <ul class="kiosk-slides">\n        <li class="kiosk-slide" ng-repeat="slide in kiosk.slides" ng-bind-html="slide.content" ng-controller="SlideController" ng-show="isCurrent()">\n        </li>\n    </ul>\n    <div ng-transclude></div>\n</div>\n')}]),angular.module("ng-kiosk",["ngSanitize","ng-kiosk.mapping","templates/kiosk.html","templates/kiosk-nav.html"]).directive("kiosk",[function(){return{restrict:"E",controller:"KioskController",templateUrl:"templates/kiosk.html",replace:!0,transclude:!0,scope:{src:"@"}}}]).controller("KioskController",["$scope","$http","map","Kiosk",function(a,b,c,d){if(a.kiosk=d,!a.src)throw new Error("kiosk src attribute not set");b.get(a.src).then(function(c){return a.setRoot(c.data),b.get(a._root._links.topic.href)}).then(function(c){return a.setTopics(c.data),b.get(a._topics._embedded.topic[0]._links.slide.href)}).then(function(b){a.setSlides(b.data),a.setState("is-ready")}).catch(function(){a.setState("is-error")}),a.setRoot=function(b){a._root=b,a.kiosk.safe.setConfiguration(c.configuration(b))},a.setTopics=function(b){a._topics=b,a.kiosk.safe.setTopics(c.topics(b))},a.setSlides=function(b){a._slides=b,a.kiosk.safe.setSlides(c.slides(b))},a.setState=function(b){a.state=b,a.$broadcast("kiosk:"+b),a.$emit("kiosk:"+b)},a.setState("is-initializing")}]).controller("SlideController",["$scope","Kiosk",function(a,b){a.isCurrentSlide=function(){return a.slide===b.slides.current}}]).directive("kioskNav",["Kiosk",function(a){return{require:"^kiosk",restrict:"E",replace:!0,controller:["$scope",function(b){b.kiosk=a}],templateUrl:"templates/kiosk-nav.html"}}]),angular.module("ng-kiosk").factory("Kiosk",["$rootScope",function(a){function b(a){if(!d.slides[a])throw new Error("No slide at index "+a);d.slides.index=a,d.slides.current=d.slides[a]}function c(a){return function(){var b=arguments;d.$apply(function(){e[a].apply(f,b)})}}var d=a.$new(),e={setTopics:function(a){d.topics=a},setSlides:function(a){d.slides=a,b(0)},addSlide:function(a){d.slides.push(a)},setConfiguration:function(a){d.configuration=a},setCurrentSlide:b,next:function(){var a=d.slides.length-1,c=d.slides.index===a?0:d.slides.index+1;b(c)},prev:function(){var a=d.slides.index-1,c=0===d.slides.index?d.slides.length-1:a;b(c)}},f={scope:d};for(var g in e)f[g]=c(g);return f.safe=e,Object.defineProperty(f,"topics",{get:function(){return d.topics}}),Object.defineProperty(f,"slides",{get:function(){return d.slides}}),f}]),angular.module("ng-kiosk.mapping",[]).factory("map",function(){return{topics:function(a){return a._embedded.topic.map(function(a){return{title:a.title,url:a._links.self.href}})},slides:function(a){return a._embedded.slide.map(function(a){return{content:a.content}})},configuration:function(a){var b=angular.copy(a);return delete b._links,delete b._embedded,b}}});