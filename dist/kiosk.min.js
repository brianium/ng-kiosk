"use strict";angular.module("ng-kiosk",[]).directive("kiosk",[function(){return{restrict:"E",controller:"KioskController",template:'<div class="is-initializing"><div ng-transclude></div></div>',replace:!0,transclude:!0,scope:{src:"@"},link:function(a,b){return a.src?void a.$watch("state",function(a,c){b.addClass(a),b.removeClass(c)}):void b.html("<p><strong>ng-kiosk:src attribute not set</strong></p>")}}}]).controller("KioskController",["$scope","$http",function(a,b){if(!a.src)throw new Error("kiosk src not set");b.get(a.src).then(function(c){return a.setKiosk(c.data),b.get(a.kiosk._links.topic.href)}).then(function(b){a.setTopics(b.data),a.setState("is-ready")}).catch(function(){a.setState("is-error")}),a.setKiosk=function(b){a.kiosk=b},a.setTopics=function(b){a.topics=b},a.setState=function(b){a.state=b,a.$broadcast("kiosk:"+b),a.$emit("kiosk:"+b)},a.setState("is-initializing")}]).directive("kioskNav",function(){return{require:"^kiosk",restrict:"E",replace:!0,template:'<nav><ul><li ng-repeat="topic in topics"><a href="{{topic.href}}">{{topic.title}}</a></li></ul></nav>'}});